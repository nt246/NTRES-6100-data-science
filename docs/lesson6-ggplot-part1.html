<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Lesson 6: Plotting with ggplot, part 1</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Collaborative and Reproducible Data Science in R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="syllabus.html">Syllabus</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Lectures
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Lecture notes</li>
    <li>
      <a href="lesson1-rstudio.html">Lesson 1: R Studio</a>
    </li>
    <li>
      <a href="lesson2-rmarkdown-github.html">Lesson 2: Quarto and GitHub</a>
    </li>
    <li>
      <a href="lesson3-version-control.html">Lesson 3: Version control and the Git/GitHub workflow</a>
    </li>
    <li>
      <a href="lesson4-collaboration.html">Lesson 4: Collaborating with GitHub - Part 1</a>
    </li>
    <li>
      <a href="lesson5-collaboration-part2.html">Lesson 5: Collaborating with GitHub - Part 2</a>
    </li>
    <li>
      <a href="lesson6-ggplot-part1.html">Lesson 6: Plotting with ggplot - Part 1</a>
    </li>
    <li>
      <a href="lesson7-data-wrangling1.html">Lesson 7: Data wrangling - Part 1</a>
    </li>
    <li>
      <a href="lesson8-data-wrangling2.html">Lesson 8: Data wrangling - Part 2</a>
    </li>
    <li>
      <a href="lesson9-ggplot-part2.html">Lesson 9: Plotting with ggplot - Part 2</a>
    </li>
    <li>
      <a href="lesson10-tidy-data.html">Lesson 10: Tidy Data</a>
    </li>
    <li>
      <a href="lesson11-data-import-and-types.html">Lesson 11: Data import, export, and conversion between data types</a>
    </li>
    <li>
      <a href="lesson12-relational-data.html">Lesson 12: Relational data</a>
    </li>
    <li>
      <a href="lesson13-for-loops.html">Lesson 13: Iteration - part 1</a>
    </li>
    <li>
      <a href="lesson14-for-loops-part2.html">Lesson 14: Iteration - part 2</a>
    </li>
    <li>
      <a href="lesson15-debugging-getting-help.html">Lesson 15: Good coding practices, debugging strategies, and getting help</a>
    </li>
    <li>
      <a href="lesson16-functions.html">Lesson 16: Functions</a>
    </li>
    <li>
      <a href="lesson17-factors.html">Lesson 17: Factors</a>
    </li>
    <li>
      <a href="lesson18-wrapup.html">Lesson 18: Wrapping up and learning more</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Labs
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Lab handouts</li>
    <li>
      <a href="lab1-rmarkdown.html">Lab 1: Quarto</a>
    </li>
    <li>
      <a href="lab2-rmarkdown-github.html">Lab 2: Quarto and GitHub</a>
    </li>
    <li>
      <a href="lab3-ggplot-website.html">Lab 3: Displaying data visualization on a website</a>
    </li>
    <li>
      <a href="lab4-ggplot-dplyr.html">Lab 4: Data exploration with the gapminder dataset</a>
    </li>
    <li>
      <a href="lab5-titanic.html">Lab 5: Data exploration with the Titanic dataset</a>
    </li>
    <li>
      <a href="lab6-tidy-data.html">Lab 6: Data cleaning and tidy data</a>
    </li>
    <li>
      <a href="lab7-relational-data.html">Lab 7: Relational data and tidy data</a>
    </li>
    <li>
      <a href="lab8-iteration.html">Lab 8: Iteration and conditional execution</a>
    </li>
    <li>
      <a href="lab9-function.html">Lab 9: Functions and iteration</a>
    </li>
  </ul>
</li>
<li>
  <a href="assignments.html">Assignments</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Resources
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="installation.html">Installation guide</a>
    </li>
    <li>
      <a href="trouble-shooting.html">Trouble-shooting guide</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Lesson 6: Plotting with ggplot, part 1</h1>

</div>


<p><br></p>
<div id="readings" class="section level2">
<h2>Readings</h2>
<div id="required" class="section level3">
<h3>Required:</h3>
<ul>
<li><a href="https://r4ds.hadley.nz/data-visualize.html">Chapter 1 in R
for Data Science (2e)</a></li>
</ul>
<p><br></p>
</div>
<div id="additional-resources" class="section level3">
<h3>Additional resources:</h3>
<ul>
<li><p>The book <a href="https://ggplot2-book.org/">ggplot2: Elegant
Graphics for Data Analysis</a> by Hadley Wickham, Danielle Navarro, and
Thomas Lin Pedersen</p></li>
<li><p><a
href="http://www.cookbook-r.com/Graphs/#graphs-with-ggplot2">Graphs with
ggplot2 - Cookbook for R</a></p></li>
<li><p><a
href="https://github.com/rstudio/cheatsheets/blob/master/data-visualization-2.1.pdf">RStudio’s
ggplot2 cheat sheet</a></p></li>
</ul>
<p><br></p>
</div>
</div>
<div id="announcements" class="section level2">
<h2>Announcements</h2>
<ul>
<li>Make sure you have a partner for Assignment 3. If you need a new
partner, just let us know in the <code>assignment</code> channel on
Slack<br />
</li>
<li>As you’re working with your partner on the assignment, we encourage
you to play around with avoiding and resolving merge conflicts. It’s
always good to get more practice</li>
<li>You’ll “submit” Assignment 3 by adding the URL to your website to
the README file of your class GitHub repo</li>
</ul>
<p><br></p>
</div>
<div id="first-a-quick-wrap-up-of-our-github-section"
class="section level2">
<h2>First, a quick wrap-up of our GitHub section</h2>
<p>GitHub has powerful infrastructure for communicating with your
collaborators (and yourself!) directly in your repo. It can be very
helpful to have discussions about data or analysis tasks/choices right
there with the rest of your project files instead of burried away in
long email chains or in unrecorded verbal converasation. We’ll do a
quick demo of a few of the ways you can communicate on GitHub. If you’re
interested, take a look at <a
href="https://openscapes.github.io/series/github-issues.html">this
chapter</a> by Julia Lowndes on using GitHub issues, or the <a
href="https://guides.github.com/features/issues/">GitHub Guide</a>.</p>
<p>Now on to today’s topic…</p>
<p><br></p>
</div>
<div id="learning-objectives-for-todays-class" class="section level2">
<h2>Learning objectives for today’s class</h2>
<p>By the end of this class you will be able to:</p>
<ul>
<li>Inspect your data in RStudio<br />
</li>
<li>Build several common types of graphs in <code>ggplot2</code><br />
</li>
<li>Customize <code>ggplot2</code> aesthetics<br />
</li>
<li>Combine compatible graph types<br />
</li>
<li>Split up data into faceted graphs<br />
</li>
<li>Change the theme of graphs</li>
</ul>
<p><strong>Acknowledgements</strong>: Some content from today’s lecture
is adapted from the excellent <a
href="https://rstudio-conf-2020.github.io/r-for-excel/">R for Excel
users</a> course by Julia Stewart Lowndes and Allison Horst and the <a
href="https://r4ds.had.co.nz/data-visualisation.html">R for Data
Science</a> book by Garrett Grolemund and Hadley Wickham.</p>
<p><br></p>
</div>
<div
id="taking-notes---remember-to-save-your-work-in-a-script-or-an-rmarkdown-file"
class="section level2">
<h2>Taking notes - remember to save your work in a script or an
RMarkdown file</h2>
<p>Have a look at <a
href="https://r4ds.had.co.nz/workflow-projects.html">Chapter 8 in
R4DS</a> and let’s all go ahead and change our RStudio settings to never
save our workspace upon exit, as shown there.</p>
<p><br></p>
<div
id="create-an-r-script-or-an-rmarkdown-file-for-working-along-with-examples-and-doing-exercises-in-this-lecture"
class="section level3">
<h3>Create an R script or an RMarkdown file for working along with
examples and doing exercises in this lecture</h3>
<p>As we start working in RStudio, we want to continue practicing how to
sync our work to GitHub. So before we start, please open the R Project
that is associated with your class repository (the name should be
<code>ntres-6100-fa2024-YOUR_USERNAME</code> (replace YOUR_USERNAME with
your GitHub user ID). Then create a new subdirectory names
<code>course-notes</code>, open an R-script or an RMarkdown file and
save it in this subdirectory as <code>lecture6-ggplot1.R</code> [or
whatever you want to call it].</p>
<p><br></p>
</div>
</div>
<div id="getting-started-with-data-visualization"
class="section level2">
<h2>Getting started with data visualization</h2>
<p>Always plot your data!</p>
<p>Two main goals for statistical graphics:</p>
<ul>
<li>To facilitate comparisons</li>
<li>To identify trends</li>
</ul>
<p>There are several ways to make plots in R. We will exclusively use
the <code>ggplot2</code> package here. If you want to know more about
why we’re using <code>ggplot2</code> instead of base plot, check out the
slides 21+22 from <a
href="https://github.com/jennybc/ggplot2-tutorial/tree/master/ggplot2-tutorial-slides">Jenny
Bryan’s ggplot tutorial</a></p>
<p><br></p>
</div>
<div id="load-packages" class="section level2">
<h2>Load packages</h2>
<p>Now we are ready to begin. <code>ggplot2</code> is a graphics package
within the <code>tidyverse</code>. You should already have this
installed, but we need to load the <code>tidyverse</code> set of
packages before you can use them.</p>
<pre class="r"><code>library(tidyverse)

# If you get an error message, run `install.packages(&quot;tidyverse&quot;)`
# If you get an error message talking about the `backports` package, run this first `install.packages(&quot;backports&quot;)`</code></pre>
<p><br></p>
</div>
<div id="preparing-to-create-our-first-ggplot2-graph"
class="section level2">
<h2>Preparing to create our first <code>ggplot2</code> graph</h2>
<p>We will visualize some fuel economy data for 38 popular models of car
using the dataset <code>mpg</code> which is included in the
<code>ggplot2</code> package.</p>
<p><br></p>
<div id="inspect-the-data-frame" class="section level3">
<h3>Inspect the data frame</h3>
<p>Before making any kind of graph, we will always need get to know our
data first. In R, data tables are most often stored as an object of the
class <code>data.frame</code>. There are a few different ways to inspect
these data tables.</p>
<ul>
<li><p>Directly type the name of the data frame</p>
<p>This method works well if you run it from RMarkdown. If run in the R
Console or if knitted on RMarkdown, it can still do a good job with
small data frames, or with data frames that are of the class
<code>tibble</code> (we will learn more about <code>tibble</code> later
in class - for now, just think of it as an upgraded type of data
frame).</p>
<p>But, if you do it with a larger, non-<code>tibble</code> data frame,
it will attempt print the entire data frame on your console or your
knitted output, making the result very difficult to read.</p>
<pre class="r"><code>## demo (compare and contrast regular data frame and tibble)
mpg</code></pre>
<pre><code>## # A tibble: 234 × 11
##    manufacturer model      displ  year   cyl trans drv     cty   hwy fl    class
##    &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
##  1 audi         a4           1.8  1999     4 auto… f        18    29 p     comp…
##  2 audi         a4           1.8  1999     4 manu… f        21    29 p     comp…
##  3 audi         a4           2    2008     4 manu… f        20    31 p     comp…
##  4 audi         a4           2    2008     4 auto… f        21    30 p     comp…
##  5 audi         a4           2.8  1999     6 auto… f        16    26 p     comp…
##  6 audi         a4           2.8  1999     6 manu… f        18    26 p     comp…
##  7 audi         a4           3.1  2008     6 auto… f        18    27 p     comp…
##  8 audi         a4 quattro   1.8  1999     4 manu… 4        18    26 p     comp…
##  9 audi         a4 quattro   1.8  1999     4 auto… 4        16    25 p     comp…
## 10 audi         a4 quattro   2    2008     4 manu… 4        20    28 p     comp…
## # ℹ 224 more rows</code></pre>
<pre class="r"><code>cars</code></pre>
<pre><code>##    speed dist
## 1      4    2
## 2      4   10
## 3      7    4
## 4      7   22
## 5      8   16
## 6      9   10
## 7     10   18
## 8     10   26
## 9     10   34
## 10    11   17
## 11    11   28
## 12    12   14
## 13    12   20
## 14    12   24
## 15    12   28
## 16    13   26
## 17    13   34
## 18    13   34
## 19    13   46
## 20    14   26
## 21    14   36
## 22    14   60
## 23    14   80
## 24    15   20
## 25    15   26
## 26    15   54
## 27    16   32
## 28    16   40
## 29    17   32
## 30    17   40
## 31    17   50
## 32    18   42
## 33    18   56
## 34    18   76
## 35    18   84
## 36    19   36
## 37    19   46
## 38    19   68
## 39    20   32
## 40    20   48
## 41    20   52
## 42    20   56
## 43    20   64
## 44    22   66
## 45    23   54
## 46    24   70
## 47    24   92
## 48    24   93
## 49    24  120
## 50    25   85</code></pre></li>
<li><p><code>View()</code></p>
<p><code>View()</code> opens up a spreadsheet-style data viewer. The
resulting spreadsheet can be sorted by clicking the column names. It is
good for exploring the dataset, but you should not run
<code>View()</code> when knitting a RMarkdown file.</p>
<p>Why do you think that is? Try typing <code>View(mpg)</code> in a code
chunk in RMarkdown, knit it, and see what happens.</p>
<pre class="r"><code>## demo knit with View() in code chunk
View(mpg)</code></pre></li>
<li><p><code>head()</code> and <code>tail()</code></p>
<p><code>head()</code> and <code>tail()</code> can be used to check the
first and last few rows of a data frame.</p>
<pre class="r"><code>## demo
head(mpg)</code></pre>
<pre><code>## # A tibble: 6 × 11
##   manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class 
##   &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; 
## 1 audi         a4      1.8  1999     4 auto(l5)   f        18    29 p     compa…
## 2 audi         a4      1.8  1999     4 manual(m5) f        21    29 p     compa…
## 3 audi         a4      2    2008     4 manual(m6) f        20    31 p     compa…
## 4 audi         a4      2    2008     4 auto(av)   f        21    30 p     compa…
## 5 audi         a4      2.8  1999     6 auto(l5)   f        16    26 p     compa…
## 6 audi         a4      2.8  1999     6 manual(m5) f        18    26 p     compa…</code></pre>
<pre class="r"><code>tail(mpg)</code></pre>
<pre><code>## # A tibble: 6 × 11
##   manufacturer model  displ  year   cyl trans      drv     cty   hwy fl    class
##   &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
## 1 volkswagen   passat   1.8  1999     4 auto(l5)   f        18    29 p     mids…
## 2 volkswagen   passat   2    2008     4 auto(s6)   f        19    28 p     mids…
## 3 volkswagen   passat   2    2008     4 manual(m6) f        21    29 p     mids…
## 4 volkswagen   passat   2.8  1999     6 auto(l5)   f        16    26 p     mids…
## 5 volkswagen   passat   2.8  1999     6 manual(m5) f        18    26 p     mids…
## 6 volkswagen   passat   3.6  2008     6 auto(s6)   f        17    26 p     mids…</code></pre></li>
<li><p><code>?</code></p>
<p>If the data frame included in an R package, typing
<code>?data_frame_name</code> will lead you to a help file with more
information on the data frame.</p></li>
<li><p><code>str()</code>, <code>dim()</code>, <code>colnames()</code>,
<code>summary()</code></p>
<p>These functions return important information on the data frame and
are particularly helpful when inspecting larger data frames. Give them a
try and see what they do.</p>
<pre class="r"><code>## exercise, then demo
str(mpg)</code></pre>
<pre><code>## tibble [234 × 11] (S3: tbl_df/tbl/data.frame)
##  $ manufacturer: chr [1:234] &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; ...
##  $ model       : chr [1:234] &quot;a4&quot; &quot;a4&quot; &quot;a4&quot; &quot;a4&quot; ...
##  $ displ       : num [1:234] 1.8 1.8 2 2 2.8 2.8 3.1 1.8 1.8 2 ...
##  $ year        : int [1:234] 1999 1999 2008 2008 1999 1999 2008 1999 1999 2008 ...
##  $ cyl         : int [1:234] 4 4 4 4 6 6 6 4 4 4 ...
##  $ trans       : chr [1:234] &quot;auto(l5)&quot; &quot;manual(m5)&quot; &quot;manual(m6)&quot; &quot;auto(av)&quot; ...
##  $ drv         : chr [1:234] &quot;f&quot; &quot;f&quot; &quot;f&quot; &quot;f&quot; ...
##  $ cty         : int [1:234] 18 21 20 21 16 18 18 18 16 20 ...
##  $ hwy         : int [1:234] 29 29 31 30 26 26 27 26 25 28 ...
##  $ fl          : chr [1:234] &quot;p&quot; &quot;p&quot; &quot;p&quot; &quot;p&quot; ...
##  $ class       : chr [1:234] &quot;compact&quot; &quot;compact&quot; &quot;compact&quot; &quot;compact&quot; ...</code></pre>
<pre class="r"><code>dim(mpg)</code></pre>
<pre><code>## [1] 234  11</code></pre>
<pre class="r"><code>colnames(mpg)</code></pre>
<pre><code>##  [1] &quot;manufacturer&quot; &quot;model&quot;        &quot;displ&quot;        &quot;year&quot;         &quot;cyl&quot;         
##  [6] &quot;trans&quot;        &quot;drv&quot;          &quot;cty&quot;          &quot;hwy&quot;          &quot;fl&quot;          
## [11] &quot;class&quot;</code></pre>
<pre class="r"><code>summary(mpg)</code></pre>
<pre><code>##  manufacturer          model               displ            year     
##  Length:234         Length:234         Min.   :1.600   Min.   :1999  
##  Class :character   Class :character   1st Qu.:2.400   1st Qu.:1999  
##  Mode  :character   Mode  :character   Median :3.300   Median :2004  
##                                        Mean   :3.472   Mean   :2004  
##                                        3rd Qu.:4.600   3rd Qu.:2008  
##                                        Max.   :7.000   Max.   :2008  
##       cyl           trans               drv                 cty       
##  Min.   :4.000   Length:234         Length:234         Min.   : 9.00  
##  1st Qu.:4.000   Class :character   Class :character   1st Qu.:14.00  
##  Median :6.000   Mode  :character   Mode  :character   Median :17.00  
##  Mean   :5.889                                         Mean   :16.86  
##  3rd Qu.:8.000                                         3rd Qu.:19.00  
##  Max.   :8.000                                         Max.   :35.00  
##       hwy             fl               class          
##  Min.   :12.00   Length:234         Length:234        
##  1st Qu.:18.00   Class :character   Class :character  
##  Median :24.00   Mode  :character   Mode  :character  
##  Mean   :23.44                                        
##  3rd Qu.:27.00                                        
##  Max.   :44.00</code></pre></li>
</ul>
<p><br></p>
</div>
<div id="activity---exercise-1" class="section level3">
<h3>Activity - Exercise 1</h3>
<p>Take a few minutes to look at <code>mtcars</code>, another car
dataset that comes pre-installed with base R. How is this different from
the <code>mpg</code> dataset, both in terms of content and
structure?</p>
<p><br> <br></p>
</div>
</div>
<div id="grammar-of-graphics-in-ggplot2" class="section level2">
<h2>Grammar of graphics in <code>ggplot2</code></h2>
<p>In this class, we will write reproducible code to build graphs
piece-by-piece. This contrasts with point-and-click applications like
Excel where graphs are made by manually selecting options, which makes
it difficult to keep track of our work. Also, if we haven’t built a
graph with reproducible code, we will have to repeat the entire plotting
process again for every new dataset and if we make complicated graphics
we might not be able to easily recreate all details of our graph.</p>
<p>Using <code>ggplot2</code>, the graphics package within the
<code>tidyverse</code>, we will write reproducible code to manually and
thoughtfully build our graphs.</p>
<blockquote>
<p>“ggplot2 implements the grammar of graphics, a coherent system for
describing and building graphs. With ggplot2, you can do more faster by
learning one system and applying it in many places.” - R4DS</p>
</blockquote>
<p>So yeah… that <code>gg</code> is from “grammar of graphics.”</p>
<p><img
src="https://rstudio-conf-2020.github.io/r-for-excel/img/rstudio-cheatsheet-ggplot.png" />
<br></p>
<p>These “same few components” that all <code>ggplot2</code> graphs
share include the followings:</p>
<p><img
src="https://cxlabsblog.files.wordpress.com/2017/10/2017-10-24-14_36_29-visualization-layers-of-ggplot-google-docs.png" /></p>
<p>Of these, <strong>data</strong>, <strong>aesthetics</strong>, and
<strong>geometries</strong> are the components that must be specified
when creating a graph.</p>
<p><br></p>
<p>From <a
href="https://stat545guidebook.netlify.app/intro-to-plotting-with-ggplot2-part-i.html#the-grammar-of-graphics-15-min">STAT545</a>:</p>
<p>You can think of the grammar of graphics as a systematic approach for
describing the components of a graph. It has seven components (the ones
in bold are required to be specifed explicitly in
<code>ggplot2</code>):</p>
<p><br></p>
<p><strong>Required:</strong></p>
<ul>
<li><strong>Data</strong>
<ul>
<li>Exactly as it sounds: the data that you’re feeding into a plot.</li>
</ul></li>
<li><strong>Aesthetic mappings</strong>
<ul>
<li>This is a specification of how you will connect variables (columns)
from your data to a visual dimension. These visual dimensions are called
“aesthetics”, and can be (for example) horizontal positioning, vertical
positioning, size, colour, shape, etc.</li>
</ul></li>
<li><strong>Geometric objects</strong>
<ul>
<li>This is a specification of what object will actually be drawn on the
plot. This could be a point, a line, a bar, etc.</li>
</ul></li>
</ul>
<p><br></p>
<p><strong>Optional:</strong></p>
<ul>
<li>Scales
<ul>
<li>This is a specification of how a variable is mapped to its
aesthetic. Will it be mapped linearly? On a log scale? Something
else?</li>
</ul></li>
<li>Statistical transformations
<ul>
<li>This is a specification of whether and how the data are
combined/transformed before being plotted. For example, in a bar chart,
data are transformed into their frequencies; in a box-plot, data are
transformed to a five-number summary.</li>
</ul></li>
<li>Coordinate system
<ul>
<li>This is a specification of how the position aesthetics (x and y) are
depicted on the plot. For example, rectangular/cartesian, or polar
coordinates.</li>
</ul></li>
<li>Facet
<ul>
<li>This is a specification of data variables that partition the data
into smaller “sub plots”, or panels.</li>
</ul></li>
</ul>
<p>These components are like parameters of statistical graphics,
defining the “space” of statistical graphics. In theory, there is a
one-to-one mapping between a plot and its grammar components, making
this a useful way to specify graphics.</p>
<p><br></p>
<p>We will use the <code>ggplot2</code> package, but the function we use
to initialize a graph will be <code>ggplot</code>, which works best for
data in tidy format (i.e., a column for every variable, and a row for
every observation). We will learn more about the tidy format and how to
convert “untidy” datasets into tidy format later in the class. For the
next few lectures, the datasets that we will use are already in tidy
format.</p>
<p>Graphics with <code>ggplot2</code> are built step-by-step, adding new
elements as layers with a plus sign (<code>+</code>) between layers.
Adding layers in this fashion allows for extensive flexibility and
customization of plots. Below is a template that can be used to create
almost any graph that you can imagine using <code>ggplot2</code>.</p>
<pre><code>ggplot(data = &lt;DATA&gt;) + 
  &lt;GEOM_FUNCTION&gt;(
     mapping = aes(&lt;MAPPINGS&gt;),
     stat = &lt;STAT&gt;, 
     position = &lt;POSITION&gt;
  ) +
  &lt;COORDINATE_FUNCTION&gt; +
  &lt;FACET_FUNCTION&gt; +
  &lt;THEME_FUNCTION&gt;</code></pre>
<p>Breaking that down:</p>
<ul>
<li>First, tell R you are using <code>ggplot()</code><br />
</li>
<li>Then, tell it the object name under which your data table is stored
(<code>data = &lt;DATA&gt;</code>)<br />
</li>
<li>Next, add a layer for the type of geometric object with
<code>&lt;GEOM_FUNCTION&gt;</code>. For example, geom_point() generates
a scatterplot, geom_line() generates a line graph, geom_bar() generates
a bar graph, etc.<br />
</li>
<li>Then, use <code>mapping = aes(&lt;MAPPINGS&gt;)</code> to specify
which variables you want to plot in this layer and which aesthetics they
should map to.</li>
<li>(Optional) Use <code>stat = &lt;STAT&gt;</code> to perform
statistical transformation with your variables.</li>
<li>(Optional) Use <code>position = &lt;POSITION&gt;</code> to perform
any position adjustment with your geometric object.</li>
<li>(Optional) Use <code>&lt;COORDINATE_FUNCTION&gt;</code> to change
the default coordinate system.</li>
<li>(Optional) Use <code>&lt;FACET_FUNCTION&gt;</code> to make a faceted
graph.</li>
<li>(Optional) Use <code>&lt;THEME_FUNCTION&gt;</code> to change the
default style of the graph.</li>
</ul>
<p><br></p>
<div id="a-simple-scatter-plot" class="section level3">
<h3>A simple scatter plot</h3>
<p>Let’s first make a simple scatter plot to look at how engine
displacement (<code>displ</code>), which is an expression of an engine’s
size, may affect the fuel economy of cars on the highway
(<code>hwy</code>). For this plot, what are the aesthetics, and what are
the geometric objects?</p>
<p><img src="assets/mpg-scatterplot.png" width="80%" /></p>
<p><br> We can make this plot by entering the relevant data,
geom_function and mappings in the general ggplot template.</p>
<pre><code>ggplot(data = &lt;DATA&gt;) + 
  &lt;GEOM_FUNCTION&gt;(mapping = aes(&lt;MAPPINGS&gt;))</code></pre>
<p><br></p>
<p>In our case, it would be</p>
<pre class="r"><code>## demo
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) </code></pre>
<p><img src="lesson6-files/unnamed-chunk-7-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="your-turn---exercise-2" class="section level3">
<h3>Your turn - Exercise 2</h3>
<ol style="list-style-type: decimal">
<li><p>Run <code>ggplot(data = mpg)</code>. What do you see?
Why?</p></li>
<li><p>Make a scatterplot of <code>hwy</code> vs
<code>cyl</code></p></li>
<li><p>If you have time, see what happens if you make a scatterplot of
<code>class</code> vs <code>drv</code>? Why is the plot not
useful?</p></li>
</ol>
<p><br></p>
</div>
<div
id="make-the-size-of-points-correspond-to-the-number-of-cylinders-cyl-and-the-color-of-points-corresponds-to-the-type-of-car-class"
class="section level3">
<h3>Make the size of points correspond to the number of cylinders
(<code>cyl</code>), and the color of points corresponds to the type of
car (<code>class</code>)</h3>
<p>The scatter plot shows that there is a negative correlation between
engine size and fuel economy. However, there are a few points that show
up as outliers from this general trend. Why might this be?</p>
<p>To explore this further, we will map <code>cyl</code> to
<code>size</code>, and <code>class</code> to <code>color</code>.</p>
<pre class="r"><code>## demo
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, color = class, size = cyl)) </code></pre>
<p><img src="lesson6-files/unnamed-chunk-8-1.png" width="672" /></p>
<p>It looks like given the same engine size, 2seaters tend to have
better fuel economy than other car types. This makes sense.</p>
<p><br></p>
</div>
<div id="change-the-shape-of-all-points" class="section level3">
<h3>Change the shape of all points</h3>
<p>There is too much overlap among the larger points in the previous
graph and we want to use a different point shape (<code>shape</code>) to
show these points more clearly. When all points in the graph get the
same aesthetic, we are no longer mapping the aesthetic to a variable.
Therefore, we should make sure to specify this outside of the
<code>mapping</code> argument.</p>
<pre class="r"><code>## demo (change point shape to 1)
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, color = class, size = cyl), shape = 1) </code></pre>
<p><img src="lesson6-files/unnamed-chunk-9-1.png" width="672" /> <br>
<br></p>
</div>
<div id="your-turn---exercise-3" class="section level3">
<h3>Your turn - Exercise 3</h3>
<ol style="list-style-type: decimal">
<li><p>Return to your scatterplot of <code>hwy</code> vs
<code>cyl</code>. Color the points by the year of manufacture for each
car model. Why does the legend look different from when we mapped
<code>class</code> to color above?</p></li>
<li><p>Next make a similar plot in which you color all the points
blue</p></li>
<li><p>If you have time, figure out what has gone wrong with this plot.
Why are the points not blue?</p></li>
</ol>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, color = &quot;blue&quot;))</code></pre>
<p><img src="lesson6-files/unnamed-chunk-10-1.png" width="672" /></p>
<p><br></p>
<p><strong>Save your note file and sync your project with your GitHub
repo.</strong></p>
<p><br></p>
</div>
<div id="overlay-two-different-geometric-objects"
class="section level3">
<h3>Overlay two different geometric objects</h3>
<p>Here, we will add a trend line to the scatter plot above. We can do
this by adding another geometric object (<code>geom_smooth()</code>) on
top of the previous graph. Give it a try yourself first.</p>
<pre class="r"><code>## exercise, then demo
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, color = class, size = cyl), shape=1) +
  geom_smooth(mapping = aes(x = displ, y = hwy))</code></pre>
<p><img src="lesson6-files/unnamed-chunk-11-1.png" width="672" /></p>
<p>Did you notice that for both geometric objects, <code>x</code> maps
to <code>displ</code> and <code>y</code> maps <code>hwy</code>, so these
auguments are repeated? In such cases, we can minimize the amount of
repeat by defining how these aesthetics map to variables for all
subsequent layers within <code>ggplot()</code>, as the following.</p>
<pre class="r"><code>## demo
ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + 
  geom_point(mapping = aes(color =class, size = cyl), shape = 1) +
  geom_smooth()</code></pre>
<p><img src="lesson6-files/unnamed-chunk-12-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="display-different-year-in-different-facets"
class="section level3">
<h3>Display different <code>year</code> in different facets</h3>
<p>One way to add additional variables is with aesthetics. Another way,
particularly useful for categorical variables, is to split your plot
into facets, subplots that each display one subset of the data.</p>
<p>The <code>mpg</code> dataset contains cars made in 1999 and 2008. To
check whether the relationship between <code>displ</code> and
<code>hwy</code> remains the same across time, we can add a facet
function to the previous plot and plot the two years side by side.</p>
<pre class="r"><code>## demo
ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + 
  geom_point(mapping = aes(color = class, size = cyl), shape = 1) +
  geom_smooth() +
  facet_wrap(~ year, nrow=1)</code></pre>
<p><img src="lesson6-files/unnamed-chunk-13-1.png" width="672" /></p>
<p><br></p>
<div id="your-turn---exercise-4" class="section level4">
<h4>Your turn - Exercise 4</h4>
<p>Break this plot into subplots for each class</p>
<pre class="r"><code>ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy))</code></pre>
<p><img src="lesson6-files/unnamed-chunk-14-1.png" width="672" /></p>
<p><br></p>
</div>
</div>
<div id="adjust-figure-size-using-chunk-options" class="section level3">
<h3>Adjust figure size using chunk options</h3>
<p>Note that each facet in the figure above appears to be quite narrow.
To make the figure wider, use RMarkdown chunk options
<code>fig.height</code> and <code>fig.width</code>, e.g. starting your
code chunk with <code>```{r fig.height=5, fig.width=10}</code>.</p>
<pre class="r"><code>## demo
ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + 
  geom_point(mapping = aes(color = class, size = cyl), shape = 1) +
  geom_smooth() +
  facet_wrap(~ year, nrow=1)</code></pre>
<p><img src="lesson6-files/unnamed-chunk-15-1.png" width="960" /></p>
<p><br></p>
</div>
<div id="change-the-theme-of-a-graph" class="section level3">
<h3>Change the theme of a graph</h3>
<p>While every element of a <code>ggplot2</code> graph is customizable,
there are also built-in themes (<code>theme_*()</code>) that you can use
to make some major headway before making smaller tweaks manually. Let’s
try one of them here. You can look at other built-in themes <a
href="https://ggplot2.tidyverse.org/reference/ggtheme.html">here</a>.</p>
<pre class="r"><code>## demo (use theme_bw)
ggplot(data = mpg, mapping = aes(x=displ, y=hwy)) + 
  geom_point(mapping = aes(color=class, size=cyl), shape=1) +
  geom_smooth() +
  facet_wrap(~ year, nrow=1) +
  theme_bw()</code></pre>
<p><img src="lesson6-files/unnamed-chunk-16-1.png" width="960" /></p>
<p><br></p>
</div>
</div>
<div id="arguments-and-functions-that-are-nice-know"
class="section level2">
<h2>Arguments and functions that are nice know</h2>
<p>Now, you’ve learned the central ideas behind <code>ggplot2</code>. In
our next <code>ggplot2</code> lecture, we will go over some more
advanced ggplot2 functionalities (e.g. statistical transformation,
position adjustment, coordinate setting, color scaling, theme), but
after that, the best way to learn more about <code>ggplot2</code> is
often through practice and Google, since the possibilities that you can
have with <code>ggplot2</code> are quite limitless, and people’s
plotting needs vary.</p>
<p>That being said, there are some geometries, aesthetics, and facet
functions that are most commonly used and these often serve as the
building blocks for more advance usage. Let’s now go through some of
these together in class. The <a
href="https://github.com/rstudio/cheatsheets/blob/master/data-visualization-2.1.pdf">RStudio
ggplot cheatsheet</a> is a great resource for looking up other
functionality.</p>
<p><br></p>
<div id="geometries" class="section level4">
<h4>Geometries</h4>
<ul>
<li><code>geom_point()</code></li>
</ul>
<p><br></p>
<ul>
<li><p><code>geom_boxplot()</code></p>
<pre class="r"><code>## exercise, then demo (hwy vs. class)
ggplot(data = mpg) +
  geom_boxplot(mapping = aes(x = class, y = hwy))</code></pre>
<p><img src="lesson6-files/unnamed-chunk-17-1.png" width="672" /></p></li>
</ul>
<p><br></p>
<ul>
<li><p><code>geom_bar()</code></p>
<pre class="r"><code>## exercise, then demo (class)
ggplot(mpg) +
  geom_bar(mapping = aes(x = class))</code></pre>
<p><img src="lesson6-files/unnamed-chunk-18-1.png" width="672" /></p></li>
</ul>
<p><br></p>
<ul>
<li><p><code>geom_histogram()</code></p>
<pre class="r"><code>## exercise, then demo (hwy)
ggplot(mpg) +
  geom_histogram(mapping = aes(x = hwy))</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="lesson6-files/unnamed-chunk-19-1.png" width="672" /></p></li>
</ul>
<p><br></p>
<ul>
<li><p><code>geom_density()</code></p>
<pre class="r"><code>## exercise, then demo (hwy)
ggplot(mpg) +
  geom_density(mapping = aes(x = hwy))</code></pre>
<p><img src="lesson6-files/unnamed-chunk-20-1.png" width="672" /></p></li>
</ul>
<p><br></p>
<ul>
<li><p><code>geom_smooth()</code></p>
<p>Different <code>geom_*()</code> functions have different arguments
that can be very helpful. You can learn more about them by reading their
help pages. For example, <code>method="lm"</code> and
<code>se=FALSE</code> are two arguments that are often used in the
<code>geom_smooth()</code> function.</p>
<pre class="r"><code>## exercise, then demo (fit linear model to hwy vs. displ without confidence interval)
ggplot(mpg, aes(x = displ, y = hwy))+
  geom_point() +
  geom_smooth(method = &quot;lm&quot;, se = F)</code></pre>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="lesson6-files/unnamed-chunk-21-1.png" width="672" /></p></li>
</ul>
<p><br></p>
<ul>
<li><p><code>geom_text()</code></p>
<pre class="r"><code>## demo (hwy vs. displ, cyl as the label)
ggplot(mpg, aes(x = displ, y = hwy))+
  geom_text(mapping = aes(label = cyl))</code></pre>
<p><img src="lesson6-files/unnamed-chunk-22-1.png" width="672" /></p></li>
</ul>
<p><br></p>
<ul>
<li><p><code>geom_label()</code></p>
<p>Each geometric object can take a different data frame if specified.
Here is an example of that.</p>
<pre class="r"><code>## demo (hwy vs. displ, model as the label but only label points with hwy &gt; 40)
ggplot(mpg)+
  geom_point(aes(x = displ, y = hwy)) +
  geom_label(data = filter(mpg, hwy &gt; 40), mapping = aes(label = model, y = hwy, x = displ + 0.4))</code></pre>
<p><img src="lesson6-files/unnamed-chunk-23-1.png" width="672" /></p></li>
</ul>
<p><br></p>
<ul>
<li><p><code>geom_line()</code></p>
<pre class="r"><code>## demo (change in mean hwy for each car model over time, grouped by model, colored by class, faceted by manufacturer)
group_by(mpg, manufacturer, year, class, model) %&gt;%
  summarize(mean_hwy = mean(hwy)) %&gt;%
  ggplot(aes(x = year, y = mean_hwy, color = class, group = model)) +
  geom_point() +
  geom_line() +
  facet_wrap(~ manufacturer)</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;manufacturer&#39;, &#39;year&#39;, &#39;class&#39;. You can
## override using the `.groups` argument.</code></pre>
<p><img src="lesson6-files/unnamed-chunk-24-1.png" width="672" /></p></li>
</ul>
<p><br></p>
</div>
<div id="aesthetics" class="section level3">
<h3>Aesthetics</h3>
<ul>
<li><p><code>x</code>, <code>y</code></p></li>
<li><p><code>size</code></p></li>
<li><p><code>label</code></p></li>
<li><p><code>group</code></p></li>
<li><p><code>color</code>, <code>fill</code> (<code>color</code>
controls the color of points and lines, whereas <code>fill</code>
controls the color of surfaces)</p>
<pre class="r"><code>## demo (plot hwy distribution with geom_density, color by drv)
ggplot(mpg) +
  geom_density(aes(color = drv, x = hwy))</code></pre>
<p><img src="lesson6-files/unnamed-chunk-25-1.png" width="672" /></p>
<pre class="r"><code>## demo (fill by drv)
ggplot(mpg) +
  geom_density(aes(fill = drv, x = hwy))</code></pre>
<p><img src="lesson6-files/unnamed-chunk-25-2.png" width="672" /></p></li>
</ul>
<p><br></p>
<ul>
<li><p><code>alpha</code></p>
<p><code>alpha</code> controls tranparency</p>
<pre class="r"><code>## demo (plot hwy distribution with geom_density, fill by drv, set alpha to 0.5)
ggplot(mpg) +
  geom_density(aes(fill = drv, x = hwy), alpha = 0.5)</code></pre>
<p><img src="lesson6-files/unnamed-chunk-26-1.png" width="672" /></p></li>
</ul>
<p><br></p>
<ul>
<li><p><code>shape</code>, <code>line_type</code></p>
<pre class="r"><code>## demo (hwy vs. displ, geom_point and geom_line, map drv to color, shape, linetype)
ggplot(mpg, aes(x = displ, y = hwy, color = drv, shape = drv)) +
  geom_point()+
  geom_smooth(aes(linetype = drv))</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;</code></pre>
<p><img src="lesson6-files/unnamed-chunk-27-1.png" width="672" /></p></li>
</ul>
<p><br></p>
<div id="facet" class="section level4">
<h4>Facet</h4>
<ul>
<li><p><code>facet_wrap()</code></p></li>
<li><p><code>facet grid()</code></p>
<pre class="r"><code>## demo (hwy vs displ, faceted by cyl and drv)
ggplot(mpg, aes(x = displ, y = hwy)) +
  geom_point() +
  facet_grid(drv ~ cyl)</code></pre>
<p><img src="lesson6-files/unnamed-chunk-28-1.png" width="672" /></p></li>
</ul>
<p><br></p>
</div>
</div>
</div>
<div id="exporting-a-ggplot-graph-with-ggsave" class="section level2">
<h2>Exporting a ggplot graph with <code>ggsave()</code></h2>
<p>If we want our graph to appear in a knitted html, then we don’t need
to do anything else. But often we’ll need a saved image file, of
specific size and resolution, to share or for publication.</p>
<p><img src="assets/ggplot2-tutorial-slides.050.png" /><!-- --> Graphic
from <a
href="https://github.com/jennybc/ggplot2-tutorial/tree/master/ggplot2-tutorial-slides">Jenny
Bryan’s ggplot tutorial</a></p>
<p><code>ggsave()</code> will export the <em>most recently run</em>
ggplot graph by default (<code>plot = last_plot()</code>), unless you
give it the name of a different saved ggplot object.</p>
<p>It has smart defaults and guesses the format from the file extension
name (you can use e.g. pdf, tiff, eps, png, mmp, svg). It doesn’t force
you to do annoying things with dots per inch etc (but you can if you
want to).</p>
<p>Some common arguments for <code>ggsave()</code>:</p>
<ul>
<li><code>width =</code>: set exported image width (default inches)</li>
<li><code>height =</code>: set exported image height (default
height)</li>
<li><code>dpi =</code>: set dpi (dots per inch)</li>
</ul>
<p>For more details on how to use <code>ggsave()</code> see slides 50-56
in <a
href="https://github.com/jennybc/ggplot2-tutorial/tree/master/ggplot2-tutorial-slides">Jenny
Bryan’s ggplot tutorial</a></p>
<p><br></p>
<div id="example-ggsave-options" class="section level3">
<h3>Example ggsave() options</h3>
<p><br></p>
<p>If the plot is on your screen</p>
<pre class="r"><code>ggsave(&quot;path_to_figure/filename.png&quot;)</code></pre>
<p><br></p>
<p>If your plot is assigned to an object</p>
<pre class="r"><code>ggsave(filename = &quot;path_to_figure/filename.png&quot;, plot1)</code></pre>
<p><br></p>
<p>Specify a size</p>
<pre class="r"><code>ggsave(filename = &quot;path_to_figure/filename.png&quot;, width = 5, height = 3)</code></pre>
<p><br></p>
<p>Or any format (pdf, png, eps, jpp, svg)</p>
<pre class="r"><code>ggsave(filename = &quot;path_to_figure/filename.png&quot;)
ggsave(filename = &quot;path_to_figure/filename.pdf&quot;)
ggsave(filename = &quot;path_to_figure/filename.jpg&quot;)</code></pre>
<p><br> <br></p>
<p>Now we’re done for today</p>
<p><br></p>
<p><strong>Save your scripte and sync your project with your GitHub
repo.</strong></p>
<ul>
<li>Save</li>
<li>Stage</li>
<li>Commit</li>
<li>Pull (to check for remote changes)</li>
<li>Push!</li>
</ul>
<p><br></p>
</div>
</div>
<div id="extra-exercises" class="section level2">
<h2>Extra exercises</h2>
<p><a
href="https://github.com/nt246/NTRES6940-data-science/blob/master/in_class_exercises/exercise_4.md">Extra
in-class exercises</a></p>
<div class="tocify-extend-page" data-unique="tocify-extend-page"
style="height: 0;">

</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
